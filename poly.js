!function(){if("function"!=typeof importScripts){const t=!0,e={quality:75,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0};if(function(){const t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0==t.toDataURL("image/webp").indexOf("data:image/webp")}())return;const a=HTMLCanvasElement.prototype.toBlob;Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){if("image/webp"==e)s(this,n).then(function(e){t(e)});else{if(a)return a.apply(this,arguments);{const a=atob(this.toDataURL(e,n).split(",")[1]),s=a.length,o=new Uint8Array(s);for(let t=0;t<s;t++)o[t]=a.charCodeAt(t);t(new Blob([o],{type:e||"image/png"}))}}}});const n=document.currentScript.src,s=function(a,s){const o=new Worker(n),i=a.getContext("2d"),r=a.width,p=a.height,l=i.getImageData(0,0,r,p),c=t?l.data:l.data.filter((t,e)=>e%4!=3),g=Object.assign(e,{quality:100*s});return new Promise((e,a)=>{o.onmessage=function(t){e(t.data)},o.postMessage({options:g,data:c,width:r,height:p,useAlpha:t})})}}else importScripts("wasm_webp.min.js"),onmessage=function(t){wasm_webp().then(function(e){const a=new Blob([e.encode(t.data.data,t.data.width,t.data.height,t.data.useAlpha?4:3,t.data.options)],{type:"image/webp"});e.free(),postMessage(a)})}}();